<analysis>
The trajectory documents an intensive, user-guided development process for a CRM's Ultra Admin panel, with the user communicating exclusively in Turkish. The work began by debugging and enhancing a Fairs management module (), fixing a series of critical UI bugs related to JSX syntax, state-based navigation, and CSS overflow/z-index issues with action menus. The AI then implemented significant features on this page, including a full suite of CRUD actions with custom modals (replacing native alerts), a bulk CSV/text import feature, and improved UI layouts based on user feedback. A crucial task involved using web search to validate and correct inaccurate fair data (dates and locations) in the production database.

The focus then shifted to the New Project form (), which was non-functional. The AI built the required backend endpoints and Pydantic models from scratch, fixed frontend prop-drilling bugs, and implemented a complex Payment Profiles system. This system allows users to save and apply predefined payment term templates (e.g., percentages and due dates), which automatically calculate installment amounts and dates based on contract value and new setup date fields. The final requests involved adding conditional logic for America Fairs and auto-formatting the project name to title case, which was the task in progress.

The next agent must respond in **Turkish**.
</analysis>
<product_requirements>
The application is a CRM designed for managing fairs and associated sales projects.

**1. Fairs Management Module:**
- **Fairs List ():** A comprehensive view to display all fairs. It was enhanced with a custom layout (stacking city/country, adding a year column), a compact date format (), and a full suite of CRUD actions (View, Edit, Delete, Update) managed through custom, styled modals. A major data integrity check was performed, correcting real-world fair dates and locations via web search and direct API updates. The page also features a bulk import function that accepts both CSV files and manually pasted text.
- **Filtering:** The system supports filtering for Past Fairs and Active Fairs based on date logic. A critical bug was fixed where the main list component would ignore filtered props and re-fetch all data.

**2. Project Creation Module ():**
- **Core Functionality:** A form to create new sales projects linked to customers and fairs. It was initially broken and required new backend models () and API endpoints.
- **Payment Profiles:** A key feature allowing users to create, save, and apply payment term templates. When a profile is selected, it automatically calculates installment amounts and due dates based on the contract total, a new  field, and new  fields.
- **Conditional UI:** The form includes a checkbox for America Fairs which, when checked, conditionally displays Advance Warehouse date fields.
- **UX Enhancements:** Includes auto-formatting for currency inputs and title-casing for the project name.
</product_requirements>
<key_technical_concepts>
- **Frontend:** React (Hooks: , ), Tailwind CSS, Shadcn/UI components (Card, Select, Modal).
- **Backend:** FastAPI, Pydantic for data modeling and validation.
- **Database:** MongoDB.
- **State Management:** Primarily component-level state. Debugging involved fixing issues with stale state in closures (solved with functional updates) and incorrect prop handling causing child components to override parent data.
- **Debugging:** Resolved critical frontend bugs including JSX syntax errors, React duplicate key errors, CSS / conflicts, and state-based navigation issues.
</key_technical_concepts>
<code_architecture>
The application is a monorepo with a  (React) and  (FastAPI).



-   ****
    -   **Importance:** Central hub for viewing and managing all fairs. It's a highly complex component that has been heavily modified.
    -   **Changes:**
        -   UI was overhauled to add/restructure columns (Year, City/Country), and a new date format () was implemented.
        -   Full CRUD functionality was added using custom modals for View, Edit, Update, and Delete actions, replacing native browser  and .
        -   A bulk import feature (CSV/text) was implemented with its own modal.
        -   A critical bug with the action menu () being clipped by the table's  property was fixed by adjusting the parent container's CSS.
        -   A major bug was fixed where its internal  would re-fetch all fairs, overriding the filtered list passed via props (e.g., from ). The  was modified to be conditional.

-   ****
    -   **Importance:** The primary form for creating new sales projects. It was built from a non-functional state into a feature-rich component.
    -   **Changes:**
        -   New state and handlers were added for Payment Profiles, allowing users to save/load payment term templates.
        -   Conditional rendering logic was implemented for America Fairs to show/hide Advance Warehouse date fields.
        -   New fields for  and / were added.
        -   Input handlers were updated to auto-format the project name to Title Case and format the contract amount with thousand separators.
        -   A bug causing  to fail was fixed by passing the correct prop from .

-   ****
    -   **Importance:** A reusable component for creating and managing payment installment plans.
    -   **Changes:**
        -   A  prop was added to allow the component to be used in the Payment Profile creation modal without showing absolute currency values.
        -   Logic was added to calculate and display due dates based on , , and  props.

-   ****
    -   **Importance:** The single-file FastAPI backend containing all API logic and data models.
    -   **Changes:**
        -   New Pydantic models were created: , , . Existing models () were updated to make fields optional.
        -   New CRUD endpoints were added for  and .
        -   A new bulk import endpoint () was added.
        -   Existing endpoints like  were used to perform data correction on incorrect fair information.
</code_architecture>
<pending_tasks>
- **Automatic Fair Renewal System:** Implement a backend scheduled task (cron job) to send an email notification one week after a fair ends, prompting an admin to renew it.
- **Güncellenmedi Badge:** Display a Not Updated badge on fairs in  if they haven't been renewed via the automatic system.
- **Full Edit Fair Page:** The Edit button in the fair list currently opens a modal. The final implementation should navigate to a dedicated edit page.
</pending_tasks>
<current_work>
The most recent task was to implement an automatic title-casing feature for the Proje Adı (Project Name) input field in the  component. The user requested that no matter how the project name is typed, it should be formatted so that the first letter of each word is capitalized and the rest are lowercase.

To achieve this, the following actions were taken:
1.  A helper function, , was created to perform the string transformation.
2.  The  handler for the project name  was modified to apply this  function to the value before updating the component's state.

The file  was edited to include this logic. The last step was to save these changes. The immediate next action should be to test this new formatting feature on the frontend to ensure it works as expected.
</current_work>
<optional_next_step>
Test the newly implemented title-casing feature for the Proje Adı input field on the Yeni Proje Formu to confirm it works correctly.
</optional_next_step>
