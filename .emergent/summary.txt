<analysis>
The trajectory details an intensive, iterative development process with a Turkish-speaking user. The work began by debugging a critical Save button failure on the , which was traced to a validation issue. This was followed by a series of user-driven UI and feature enhancements.

A significant effort was dedicated to fixing a recurring UI bug where dropdown menus were clipped by parent containers. The engineer implemented a fix using  and later enhanced it with dynamic positioning to open the menu upwards if space is limited.

The core of the work involved two major feature enhancements on the customer management module. First, the  was heavily modified to support data inheritance from company fields to contact fields (e.g., country, address, phone code) and a complete layout redesign of the contacts section. This involved complex state management with  and . Second, the  was overhauled based on a 13-point user request list to display more customer data accurately.

The final tasks involved adding a Yeni Müşteri Adayı (New Customer Prospect) button, which led to an  error. The last action was to add the missing prop to the  component to resolve this error.

The user's primary language is **Turkish**. The next agent must continue all communication in Turkish.
</analysis>
<product_requirements>
The goal is to build and refine a business administration application with a focus on customer and prospect management.

**1. Customer & Prospect Management:**
*   **Forms:** A highly detailed New Customer form () that supports creating both full customers and prospects.
    *   **Data Inheritance:** Company information (country, city, address) should automatically populate the fields for contact persons. Phone number country codes must update dynamically based on the selected company country.
    *   **Layout:** Specific layouts are required for contact person details, including side-by-side fields and an accounting responsible checkbox.
*   **Customer Details View:** A comprehensive read-only view () that correctly displays all customer information, including custom fields, multiple contacts, financial details, and system metadata.
*   **Prospects Page:** A dedicated page for Customer Prospects () with a professional CSV import/export feature, including a modal for import instructions and a sample file download.

**2. UI/UX & Bug Fixes:**
*   **Dropdown/Overlay Menus:** All ... action menus must appear as overlays above other content and dynamically reposition themselves (opening upwards) if they are at the bottom of the viewport.
*   **Dashboard Stats:** Statistics on the main dashboard (e.g., Active Customers) must update in real-time when data changes (e.g., a customer is deleted).
*   **Sidebar Persistence:** The main navigation sidebar must remain visible after a hard page refresh.
</product_requirements>
<key_technical_concepts>
- **Frontend:** React, Tailwind CSS, , 
- **Backend:** FastAPI (Python)
- **Architecture:** Monorepo with a React SPA frontend and a monolithic FastAPI backend.
- **State Management:** React Hooks (, ) for component-level state and data fetching.
- **UI Patterns:** Reusable components, dynamic CSS positioning with , conditional rendering, Accordion UI.
- **Debugging:** Heavy reliance on  and browser dev tools to trace rendering issues, state changes, and event handler failures.
</key_technical_concepts>
<code_architecture>
The application is a monorepo with a React frontend and a FastAPI backend.

- ****
  - **Importance:** A massive, multi-purpose form for creating customers and prospects. It's the most complex component and the source of many bugs and feature requests.
  - **Summary of Changes:** The file underwent extensive refactoring. Key changes include:
    - Implementation of data inheritance from company fields to contact fields using .
    - Dynamic phone code updates using  based on country selection.
    - A complete layout overhaul for the Yetkili Kişi (Contact Person) section to place fields side-by-side and add a new checkbox.
    - Logic to accept an  prop to pre-fill the Müşteri Adayı checkbox.
    - The initial Save button not working bug was fixed here by correcting validation logic.

- ****
  - **Importance:** The main page for listing all customers. It contains the table and action menus.
  - **Summary of Changes:**
    - The action menu dropdown was fixed to be an overlay using  and .
    - Logic was added to dynamically change the menu's opening direction (up or down) based on viewport space.
    - A Yeni Müşteri Adayı (New Customer Prospect) button was added to the header.
    - The  prop was added to the component to handle the new button's click event.

- ****
  - **Importance:** Displays the details of a single customer.
  - **Summary of Changes:** The component was heavily modified to satisfy a 13-point list from the user. This involved displaying previously hidden or incorrect data (customer type, company title, web site, bank info, contact's position), relabeling sections, and reformatting layouts (e.g., placing country and city side-by-side).

- ****
  - **Importance:** Page for managing potential customers (prospects).
  - **Summary of Changes:**
    - The Close button was removed.
    - Excel Aktar was renamed to Dışarı Aktar.
    - A professional import feature was added, including a new modal dialog with instructions, a sample file download link, and a file upload area, replacing a simpler, non-functional implementation.

- ****
  - **Importance:** The main application component handling routing (via state) and global state.
  - **Summary of Changes:**
    - The hardcoded value for the Aktif Müşteri stat card was replaced with  to make it dynamic.
    - State and handler functions (, ) were added to support opening the  in prospect mode.
    - Props were passed down to  to connect the new button.
    - The sidebar disappearing on hard refresh was investigated here, though the final fix was in the component's state initialization.
</code_architecture>
<pending_tasks>
- Verify that the Yeni Müşteri Adayı button on the Tüm Müşteriler page correctly opens the new customer form with the Müşteri Adayı checkbox ticked and without errors.
- Fully test the dynamic overlay menu on the  to ensure it opens upwards when at the bottom of the screen, as this was implemented but not conclusively verified.
</pending_tasks>
<current_work>
The most recent task was to address a user request to add a Yeni Müşteri Adayı (New Customer Prospect) button on the Tüm Müşteriler () page. This button should open the Yeni Müşteri () form with the Müşteri Adayı checkbox automatically selected.

The implementation involved:
1.  Adding a  state to .
2.  Modifying the  function in  to accept a boolean and set this state.
3.  Passing the  function as a prop () down to .
4.  Adding the button to the header of  with an  handler.
5.  Modifying  to accept an  prop and set the initial state of the checkbox accordingly.

This resulted in a runtime error: . The AI engineer identified that the  prop was missing from the component's function signature in .

The very last action was to fix this by adding the prop:
**File:** 
**Change:**

The work is paused immediately after applying this fix, before it could be tested.
</current_work>
<optional_next_step>
Test the fix. Go to the Tüm Müşteriler page, click the Yeni Müşteri Adayı button, and confirm the new customer form opens with the prospect checkbox ticked, and no console errors appear.
</optional_next_step>
